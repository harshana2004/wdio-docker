// Declarative pipeline 
pipeline {
    environment {
    registry = "myharshdocker/jenkins-docker-latest"
    registryCredential = 'dockerhub'
    }
     agent any
      stages {
       stage('Build image') {
        steps {
            script {
                    sh "docker build . -t 'my-testing'"
                   }
              }
            }
      stage('Execute Tests') {
        steps {
          echo 'Run test in chrome and firefox'
            script {
                     sh "mkdir -p output"
                    sh "docker run -v 'cd/output:/workdir/output' 'my-testing'"
                   }
              }
            }     
          }
        }